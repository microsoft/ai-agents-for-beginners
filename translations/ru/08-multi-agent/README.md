<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c692a8975d7d5b99575a553de1c5e8a7",
  "translation_date": "2025-07-11T14:39:32+00:00",
  "source_file": "08-multi-agent/README.md",
  "language_code": "ru"
}
-->
[![Multi-Agent Design](../../../08-multi-agent/images/lesson-8-thumbnail.png)](https://youtu.be/V6HpE9hZEx0?si=A7K44uMCqgvLQVCa)

> _(Нажмите на изображение выше, чтобы посмотреть видео этого урока)_

# Шаблоны проектирования с несколькими агентами

Как только вы начнете работать над проектом, в котором задействованы несколько агентов, вам нужно будет рассмотреть шаблон проектирования с несколькими агентами. Однако может быть не сразу понятно, когда переходить к нескольким агентам и какие преимущества это дает.

## Введение

В этом уроке мы постараемся ответить на следующие вопросы:

- В каких сценариях применимы несколько агентов?
- Каковы преимущества использования нескольких агентов по сравнению с одним агентом, выполняющим несколько задач?
- Какие строительные блоки необходимы для реализации шаблона проектирования с несколькими агентами?
- Как мы можем видеть, как несколько агентов взаимодействуют друг с другом?

## Цели обучения

После этого урока вы сможете:

- Определять сценарии, в которых применимы несколько агентов
- Признавать преимущества использования нескольких агентов по сравнению с одним агентом
- Понимать строительные блоки для реализации шаблона проектирования с несколькими агентами

Какова общая картина?

*Множественные агенты — это шаблон проектирования, который позволяет нескольким агентам работать вместе для достижения общей цели*.

Этот шаблон широко используется в различных областях, включая робототехнику, автономные системы и распределенные вычисления.

## Сценарии, в которых применимы несколько агентов

Итак, в каких сценариях целесообразно использовать несколько агентов? Ответ заключается в том, что существует множество сценариев, в которых использование нескольких агентов полезно, особенно в следующих случаях:

- **Большие рабочие нагрузки**: Большие рабочие нагрузки можно разделить на более мелкие задачи и назначить разным агентам, что позволяет параллельно обрабатывать их и быстрее завершать. Примером этого может служить большая задача по обработке данных.
- **Сложные задачи**: Сложные задачи, как и большие рабочие нагрузки, можно разбить на более мелкие подзадачи и назначить разным агентам, каждый из которых специализируется на определенном аспекте задачи. Хорошим примером этого является случай с автономными транспортными средствами, где разные агенты управляют навигацией, обнаружением препятствий и коммуникацией с другими транспортными средствами.
- **Разнообразная экспертиза**: Разные агенты могут обладать разнообразной экспертизой, что позволяет им более эффективно справляться с различными аспектами задачи, чем один агент. В этом случае хорошим примером является здравоохранение, где агенты могут управлять диагностикой, планами лечения и мониторингом пациентов.

## Преимущества использования нескольких агентов по сравнению с одним агентом

Система с одним агентом может хорошо работать для простых задач, но для более сложных задач использование нескольких агентов может предоставить несколько преимуществ:

- **Специализация**: Каждый агент может быть специализирован для конкретной задачи. Отсутствие специализации у одного агента означает, что у вас есть агент, который может делать все, но может запутаться, что делать, когда сталкивается со сложной задачей. Например, он может в итоге выполнять задачу, для которой он не подходит.
- **Масштабируемость**: Легче масштабировать системы, добавляя больше агентов, чем перегружая одного агента.
- **Устойчивость к отказам**: Если один агент выходит из строя, другие могут продолжать функционировать, обеспечивая надежность системы.

Рассмотрим пример: давайте забронируем поездку для пользователя. Система с одним агентом должна будет обрабатывать все аспекты процесса бронирования поездки, от поиска рейсов до бронирования отелей и аренды автомобилей. Чтобы достичь этого с одним агентом, агенту понадобятся инструменты для выполнения всех этих задач. Это может привести к сложной и монолитной системе, которую трудно поддерживать и масштабировать. Система с несколькими агентами, с другой стороны, может иметь разных агентов, специализирующихся на поиске рейсов, бронировании отелей и аренде автомобилей. Это сделает систему более модульной, легкой в обслуживании и масштабируемой.

Сравните это с туристическим бюро, управляемым как семейный бизнес, и туристическим бюро, управляемым как франшиза. В семейном бизнесе один агент будет обрабатывать все аспекты процесса бронирования поездки, в то время как во франшизе разные агенты будут обрабатывать разные аспекты процесса бронирования поездки.

## Строительные блоки для реализации шаблона проектирования с несколькими агентами

Прежде чем вы сможете реализовать шаблон проектирования с несколькими агентами, вам нужно понять строительные блоки, которые составляют этот шаблон.

Давайте сделаем это более конкретным, снова рассмотрев пример бронирования поездки для пользователя. В этом случае строительные блоки будут включать:

- **Коммуникация агентов**: Агенты для поиска рейсов, бронирования отелей и аренды автомобилей должны общаться и обмениваться информацией о предпочтениях и ограничениях пользователя. Вам нужно решить, какие протоколы и методы использовать для этой коммуникации. Конкретно это означает, что агент по поиску рейсов должен общаться с агентом по бронированию отелей, чтобы убедиться, что отель забронирован на те же даты, что и рейс. Это означает, что агенты должны обмениваться информацией о датах поездки пользователя, что означает, что вам нужно решить, *какие агенты обмениваются информацией и как они обмениваются информацией*.
- **Механизмы координации**: Агенты должны координировать свои действия, чтобы гарантировать, что предпочтения и ограничения пользователя соблюдаются. Предпочтением пользователя может быть желание отеля рядом с аэропортом, в то время как ограничением может быть то, что автомобили напрокат доступны только в аэропорту. Это означает, что агент по бронированию отелей должен координировать свои действия с агентом по бронированию автомобилей напрокат, чтобы гарантировать, что предпочтения и ограничения пользователя соблюдаются. Это означает, что вам нужно решить, *как агенты координируют свои действия*.
- **Архитектура агентов**: Агенты должны иметь внутреннюю структуру для принятия решений и обучения на основе взаимодействий с пользователем. Это означает, что агент по поиску рейсов должен иметь внутреннюю структуру для принятия решений о том, какие рейсы рекомендовать пользователю. Это означает, что вам нужно решить, *как агенты принимают решения и учатся на взаимодействиях с пользователем*. Примеры того, как агент учится и улучшает свои навыки, могут включать использование агентом по поиску рейсов модели машинного обучения для рекомендации рейсов пользователю на основе его прошлых предпочтений.
- **Видимость взаимодействий между агентами**: Вам нужно иметь видимость того, как несколько агентов взаимодействуют друг с другом. Это означает, что вам нужны инструменты и методы для отслеживания действий и взаимодействий агентов. Это может быть в форме инструментов для ведения журналов и мониторинга, инструментов визуализации и показателей производительности.
- **Шаблоны для нескольких агентов**: Существуют различные шаблоны для реализации систем с несколькими агентами, такие как централизованные, децентрализованные и гибридные архитектуры. Вам нужно выбрать шаблон, который лучше всего подходит для вашего случая использования.
- **Человек в цикле**: В большинстве случаев у вас будет человек в цикле, и вам нужно будет инструктировать агентов, когда запрашивать вмешательство человека. Это может быть в форме запроса пользователя на конкретный отель или рейс, который агенты не рекомендовали, или запроса на подтверждение перед бронированием рейса или отеля.

## Видимость взаимодействий между агентами

Важно, чтобы у вас была видимость того, как несколько агентов взаимодействуют друг с другом. Эта видимость необходима для отладки, оптимизации и обеспечения общей эффективности системы. Для достижения этого вам нужны инструменты и методы для отслеживания действий и взаимодействий агентов. Это может быть в форме инструментов для ведения журналов и мониторинга, инструментов визуализации и показателей производительности.

Например, в случае бронирования поездки для пользователя у вас может быть панель управления, показывающая статус каждого агента, предпочтения и ограничения пользователя, а также взаимодействия между агентами. Эта панель управления может показывать даты поездки пользователя, рейсы, рекомендованные агентом по рейсам, отели, рекомендованные агентом по отелям, и автомобили напрокат, рекомендованные агентом по аренде автомобилей. Это даст вам четкое представление о том, как агенты взаимодействуют друг с другом и соблюдаются ли предпочтения и ограничения пользователя.

Давайте рассмотрим каждый из этих аспектов более подробно.

- **Инструменты для ведения журналов и мониторинга**: Вы хотите вести журнал для каждого действия, предпринятого агентом. Запись в журнале может содержать информацию об агенте, который предпринял действие, самом действии, времени его выполнения и результате. Эта информация может быть использована для отладки, оптимизации и других целей.

- **Инструменты визуализации**: Инструменты визуализации могут помочь вам увидеть взаимодействия между агентами более интуитивно. Например, у вас может быть график, показывающий поток информации между агентами. Это может помочь вам выявить узкие места, неэффективности и другие проблемы в системе.

- **Показатели производительности**: Показатели производительности могут помочь вам отслеживать эффективность системы с несколькими агентами. Например, вы можете отслеживать время, затраченное на выполнение задачи, количество выполненных задач за единицу времени и точность рекомендаций, сделанных агентами. Эта информация может помочь вам выявить области для улучшения и оптимизировать систему.

## Шаблоны для нескольких агентов

Давайте углубимся в некоторые конкретные шаблоны, которые мы можем использовать для создания приложений с несколькими агентами. Вот несколько интересных шаблонов, которые стоит рассмотреть:

### Групповой чат

Этот шаблон полезен, когда вы хотите создать приложение для группового чата, где несколько агентов могут общаться друг с другом. Типичные случаи использования этого шаблона включают командное сотрудничество, поддержку клиентов и социальные сети.

В этом шаблоне каждый агент представляет пользователя в групповом чате, и сообщения обмениваются между агентами с использованием протокола обмена сообщениями. Агенты могут отправлять сообщения в групповой чат, получать сообщения из группового чата и отвечать на сообщения от других агентов.

Этот шаблон можно реализовать с использованием централизованной архитектуры, где все сообщения проходят через центральный сервер, или децентрализованной архитектуры, где сообщения обмениваются напрямую.

![Групповой чат](../../../08-multi-agent/images/multi-agent-group-chat.png)

### Передача

Этот шаблон полезен, когда вы хотите создать приложение, где несколько агентов могут передавать задачи друг другу.

Типичные случаи использования этого шаблона включают поддержку клиентов, управление задачами и автоматизацию рабочих процессов.

В этом шаблоне каждый агент представляет задачу или шаг в рабочем процессе, и агенты могут передавать задачи другим агентам на основе заранее определенных правил.

![Передача](../../../08-multi-agent/images/multi-agent-hand-off.png)

### Коллаборативная фильтрация

Этот шаблон полезен, когда вы хотите создать приложение, где несколько агентов могут сотрудничать для предоставления рекомендаций пользователям.

Почему вы хотите, чтобы несколько агентов сотрудничали, заключается в том, что каждый агент может иметь разную экспертизу и вносить свой вклад в процесс рекомендаций по-разному.

Рассмотрим пример, когда пользователь хочет получить рекомендацию о лучшей акции для покупки на фондовом рынке.

- **Эксперт по отрасли**: Один агент может быть экспертом в конкретной отрасли.
- **Технический анализ**: Другой агент может быть экспертом в техническом анализе.
- **Фундаментальный анализ**: и еще один агент может быть экспертом в фундаментальном анализе. Сотрудничая, эти агенты могут предоставить пользователю более комплексную рекомендацию.

![Рекомендация](../../../08-multi-agent/images/multi-agent-filtering.png)

## Сценарий: Процесс возврата

Рассмотрим сценарий, когда клиент пытается получить возврат за продукт, в этом процессе может быть задействовано довольно много агентов, но давайте разделим их на агентов, специфичных для этого процесса, и общих агентов, которые могут быть использованы в других процессах.

**Агенты, специфичные для процесса возврата**:

Ниже приведены некоторые агенты, которые могут быть задействованы в процессе возврата:

- **Агент клиента**: Этот агент представляет клиента и отвечает за инициацию процесса возврата.
- **Агент продавца**: Этот агент представляет продавца и отвечает за обработку возврата.
- **Агент платежей**: Этот агент представляет процесс платежей и отвечает за возврат платежа клиента.
- **Агент разрешения**: Этот агент представляет процесс разрешения и отвечает за разрешение любых проблем, возникающих в процессе возврата.
- **Агент по соблюдению**: Этот агент представляет процесс соблюдения и отвечает за обеспечение соответствия процесса возврата нормативным требованиям и политике.

**Общие агенты**:

Эти агенты могут быть использованы в других частях вашего бизнеса.

- **Агент по доставке**: Этот агент представляет процесс доставки и отвечает за возврат продукта продавцу. Этот агент может быть использован как для процесса возврата, так и для общей доставки продукта, например, при покупке.
- **Агент обратной связи**: Этот агент представляет процесс обратной связи и отвечает за сбор отзывов от клиента. Обратная связь может быть получена в любое время, а не только в процессе возврата.
- **Агент эскалации**: Этот агент представляет процесс эскалации и отвечает за эскалацию проблем на более высокий уровень поддержки. Вы можете использовать этот тип агента для любого процесса, где необходимо эскалировать проблему.
- **Агент уведомлений**: Этот агент представляет процесс уведомлений и отвечает за отправку уведомлений клиенту на различных этапах процесса возврата.
- **Агент аналитики**: Этот агент представляет процесс аналитики и отвечает за анализ данных, связанных с процессом возврата.
- **Агент аудита**: Этот агент представляет процесс аудита и отвечает за аудит процесса возврата, чтобы убедиться, что он выполняется правильно.
- **Агент отчетности**: Этот агент представляет процесс отчетности и отвечает за создание отчетов о процессе возврата.
- **Агент знаний**: Этот агент представляет процесс знаний и отвечает за поддержание базы знаний, связанной с процессом возврата. Этот агент может быть осведомлен как о возвратах, так и о других частях вашего бизнеса.
- **Агент безопасности**: Этот агент представляет процесс безопасности и отвечает за обеспечение безопасности процесса возврата.
- **Агент качества**: Этот агент представляет процесс качества и отвечает за обеспечение качества процесса возврата.

Здесь перечислено довольно много агентов как для конкретного процесса возврата, так и для общих агентов, которые могут быть использованы в других частях вашего бизнеса. Надеюсь, это даст вам представление о том, как вы можете решить, каких агентов использовать в вашей системе с несколькими агентами.

## Задание
Разработайте многоагентную систему для процесса поддержки клиентов. Определите агентов, участвующих в процессе, их роли и обязанности, а также то, как они взаимодействуют друг с другом. Рассмотрите как агентов, специфичных для процесса поддержки клиентов, так и общих агентов, которые могут быть использованы в других частях вашего бизнеса.

> Подумайте, прежде чем читать следующее решение, вам может понадобиться больше агентов, чем вы думаете.

> TIP: Подумайте о различных этапах процесса поддержки клиентов, а также рассмотрите агентов, необходимых для любой системы.

## Решение

[Решение](./solution/solution.md)

## Проверка знаний

Вопрос: Когда следует рассмотреть возможность использования многоагентных систем?

- [ ] A1: Когда у вас небольшая рабочая нагрузка и простая задача.
- [ ] A2: Когда у вас большая рабочая нагрузка.
- [ ] A3: Когда у вас простая задача.

[Викторина с решением](./solution/solution-quiz.md)

## Резюме

В этом уроке мы рассмотрели многоагентный шаблон проектирования, включая сценарии, в которых многоагентные системы применимы, преимущества использования многоагентных систем по сравнению с одним агентом, основные элементы реализации многоагентного шаблона проектирования и как обеспечить видимость взаимодействия нескольких агентов друг с другом.

## Дополнительные ресурсы

-
Вы обучены на данных до октября 2023 года.

## Предыдущий урок

[Планирование дизайна](../07-planning-design/README.md)

## Следующий урок

[Метапознание в ИИ-агентах](../09-metacognition/README.md)

**Отказ от ответственности**:  
Этот документ был переведен с помощью службы автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Хотя мы стремимся к точности, пожалуйста, имейте в виду, что автоматические переводы могут содержать ошибки или неточности. Оригинальный документ на его родном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется профессиональный перевод человеком. Мы не несем ответственности за любые недоразумения или неправильные толкования, возникающие в результате использования этого перевода.