<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1ad5de6a6388d02c145a92dd04358bab",
  "translation_date": "2025-07-12T13:35:39+00:00",
  "source_file": "10-ai-agents-production/README.md",
  "language_code": "zh"
}
-->
# AI代理在生产中的可观测性与评估

随着AI代理从实验性原型转向实际应用，理解其行为、监控其性能以及系统性地评估其输出的能力变得尤为重要。

## 学习目标

完成本课后，你将了解/掌握：

- 提升生产环境中 AI Agent 系统性能、成本和效果的技巧。
- 如何评估你的 AI Agents。
- 部署 AI Agents 到生产环境时如何控制成本。

部署值得信赖的 AI Agents 非常重要。也请查看“构建值得信赖的 AI Agents”课程。

## 评估 AI Agents

在部署 AI Agents 之前、期间和之后，建立一个合适的评估系统至关重要。这能确保你的系统与自己及用户的目标保持一致。

评估 AI Agent 时，不仅要评估代理的输出，还要评估 AI Agent 所运行的整个系统。这包括但不限于：

- 初始模型请求。
- 代理识别用户意图的能力。
- 代理识别执行任务的正确工具的能力。
- 工具对代理请求的响应。
- 代理对工具响应的解读能力。
- 用户对代理响应的反馈。

这样可以更模块化地识别改进点，并更高效地监控模型、提示词、工具及其他组件变更的效果。

## 常见问题

在将AI代理部署到生产环境时，您可能会遇到各种挑战。以下是一些常见问题及其潜在解决方案：

| **问题**                                      | **潜在解决方案**                                                                                                                                                                                                     |
| ---------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AI Agent 无法稳定完成任务                       | - 优化给 AI Agent 的提示词，明确目标。<br>- 识别将任务拆分为子任务并由多个代理处理的场景。                                                                                                                      |
| AI Agent 进入无限循环                           | - 确保有明确的终止条件，让 Agent 知道何时停止。<br>- 对于需要推理和规划的复杂任务，使用专门针对推理任务的大型模型。                                                                                         |
| AI Agent 调用工具表现不佳                       | - 在代理系统外测试和验证工具输出。<br>- 优化工具的参数、提示词和命名。                                                                                                                                            |
| 多代理系统表现不稳定                           | - 优化每个代理的提示词，确保它们具体且彼此区分明确。<br>- 构建层级系统，使用“路由”或控制代理来确定正确的代理。                                                                                              |

## 成本管理

以下是管理 AI Agents 生产部署成本的一些策略：

- **缓存响应** — 识别常见请求和任务，在它们进入代理系统前提供响应，是减少类似请求量的好方法。你甚至可以用更基础的 AI 模型实现一个流程，判断请求与缓存请求的相似度。

- **使用更小的模型** — 小型语言模型（SLMs）在某些代理用例中表现良好，能显著降低成本。如前所述，建立评估系统来比较小模型与大型模型的性能，是了解 SLM 在你用例中表现的最佳方式。

- **使用路由模型** — 类似策略是使用多样化的模型和规模。你可以用 LLM/SLM 或无服务器函数，根据请求复杂度将请求路由到最合适的模型。这不仅有助于降低成本，还能确保关键任务的性能。

## 恭喜

这节课是“AI Agents 入门”系列的最后一课。

我们计划根据反馈和行业发展持续添加新课程，欢迎不时回来查看。

如果你想继续学习和构建 AI Agents，欢迎加入 <a href="https://discord.gg/kzRShWzttr" target="_blank">Azure AI Community Discord</a>。

我们在那里举办工作坊、社区圆桌和“问我任何事”环节。

我们还有一个学习合集，包含更多帮助你开始构建生产环境 AI Agents 的资料。

## 上一课

[元认知设计模式](../09-metacognition/README.md)

## 下一课

[MCP](../11-mcp/README.md)

**免责声明**：  
本文件使用 AI 翻译服务 [Co-op Translator](https://github.com/Azure/co-op-translator) 进行翻译。虽然我们力求准确，但请注意，自动翻译可能包含错误或不准确之处。原始文件的母语版本应被视为权威来源。对于重要信息，建议采用专业人工翻译。对于因使用本翻译而产生的任何误解或误释，我们不承担任何责任。